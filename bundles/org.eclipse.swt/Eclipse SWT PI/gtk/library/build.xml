<?xml version="1.0" encoding="UTF-8"?>

<project default="build_gtk_linux_lib" basedir=".">

<target name="init">
	<tstamp/>
    <property name="lib_destdir" value="${basedir}/../../../../org.eclipse.swt.gtk/os/linux/x86" />
    <property name="lib_destdir64" value="${basedir}/../../../../org.eclipse.swt.gtk64/os/linux/amd64" />
</target>

<!-- Build swt.so for GTK -->
<!-- Output .so for this platform into the org.eclipse.swt.gtk/os directory -->
<target name="build_gtk_linux_lib" depends="init">
	<mkdir dir="${lib_destdir}" />
	<exec dir="." executable="sh">
		<arg line="${basedir}/build.sh"/>
	</exec>
	<copy todir="${lib_destdir}">
		<fileset dir="${basedir}/" includes="*.so"/>
	</copy>
	<antcall target="refresh" />	
</target>

<!-- Output .so for this platform into the org.eclipse.swt.gtk64/os directory -->
<target name="build_gtk_64_linux_lib" depends="init">
	<mkdir dir="${lib_destdir64}" />
	<exec dir="." executable="sh">
		<arg line="${basedir}/build.sh"/>
		<arg line="all64"/>
	</exec>
	<copy todir="${lib_destdir64}">
		<fileset dir="${basedir}/" includes="*.so"/>
	</copy>
	<antcall target="refresh" />	
</target>

<target name="clean"  depends="init">
	<tstamp/>
	<exec dir="." executable="sh">
		<arg line="${basedir}/build.sh"/>
		<arg line="clean"/>
	</exec>
</target>

<target name="refresh" depends="init" if="eclipse.running">
	<eclipse.refreshLocal resource="${fragment}" depth="infinite"/>
</target>

</project>